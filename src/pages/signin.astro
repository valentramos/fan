---
import Layout from "../layouts/Layout.astro";
import { Button } from "@/components/ui/button";
import {
	Card,
	CardContent,
	CardDescription,
	CardFooter,
	CardHeader,
	CardTitle,
} from "@/components/ui/card";
import { Input } from "@/components/ui/input";
import { Label } from "@/components/ui/label";

const { cookies, redirect } = Astro;

const accessToken = cookies.get("sb-access-token");
const refreshToken = cookies.get("sb-refresh-token");

if (accessToken && refreshToken) {
	return redirect("/dashboard");
}
---

<Layout
	title="Iniciar Sesión"
	description="Autenticación del usuario"
	keywords=""
	image="/favicon.svg"
>
	<section>
		<div class="container-fluid">
			<div
				class="h-screen flex justify-center items-center 2xl:px-0 px-5"
			>
				<Card className="w-full max-w-sm">
					<form action="/api/auth/signin" method="post">
						<CardHeader>
							<CardTitle className="text-2xl"
								>Inicio de sesión</CardTitle
							>
							<CardDescription>
								Ingresa tu correo electrónico para iniciar
								sesión con tu cuenta.
							</CardDescription>
						</CardHeader>
						<CardContent className="grid gap-4">
							<!-- <label for="email">Correo electrónico</label>
							<input type="email" name="email" id="email" />
							<label for="password">Contraseña</label>
							<input type="password" name="password" id="password" />
							<button type="submit">Iniciar sesión</button> -->

							<div class="grid gap-2">
								<Label htmlFor="email">Correo electrónico</Label
								>
								<Input
									id="email"
									name="email"
									type="email"
									placeholder="tu-correo@email.com"
									required
								/>
							</div>
							<div class="grid gap-2">
								<Label htmlFor="password">Contraseña</Label>
								<Input
									id="password"
									type="password"
									name="password"
									placeholder="*************"
									required
								/>
							</div>
						</CardContent>
						<CardFooter>
							<!-- <p>¿Nuevo aquí? <a href="/register">Crea una cuenta</a></p> -->
							<Button className="w-full" type="submit"
								>Iniciar sesión</Button
							>
						</CardFooter>
					</form>
				</Card>
			</div>
		</div>
	</section>
</Layout>
